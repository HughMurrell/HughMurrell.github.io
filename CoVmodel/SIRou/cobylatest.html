<html>
<head>
</head>

<script src='Cobyla.js' type='text/javascript'></script>

<body>
<h1>Test cobyla</h1>
This example shows an easy example of nonlinear optimization with JavaScript. Look at the source code! <br>
Copyright notice in Cobyla.js!

<br>
The point on the unit circle closest to (5,5) is:

<script type="text/javascript">
    
function CSVParse(csvFile)
{
    this.rows = [];

    var fieldRegEx = new RegExp('(?:\s*"((?:""|[^"])*)"\s*|\s*((?:""|[^",\r\n])*(?:""|[^"\s,\r\n]))?\s*)(,|[\r\n]+|$)', "g");
    var row = [];
    var currMatch = null;

    while (currMatch = fieldRegEx.exec(this.csvFile))
    {
        row.push([currMatch[1], currMatch[2]].join('')); // concatenate with potential nulls

        if (currMatch[3] != ',')
        {
            this.rows.push(row);
            row = [];
        }

        if (currMatch[3].length == 0)
            break;
    }
    return this.rows;
}

var data = CSVParse("data/confirmedcases-Table 1.csv");
console.dir(data);

var n=2; 			// + of variables
var x=new Array(n);
var m=2; 			// number of constraints
var rhobeg = 5.0;	// Various Cobyla constants, see Cobyla docs in Cobyja.js
var rhoend = 1.0e-6;
var iprint = 0;
var maxfun = 3500;

function test(n,m,x,con) {  	// objective function
   con[0]=x[0]*x[0]+x[1]*x[1]-1 		// first inequality constraint
   con[1]=-(x[0]*x[0]+x[1]*x[1]-1)	// second inequality constraint, together an equality constraint
   return (x[0]-5)*(x[0]-5)+(x[1]-5)*(x[1]-5); // objective function 
   }
x[0]=-7.9; x[1]=3.2;
var r=FindMinimum(test, n,  m, x, rhobeg, rhoend,  iprint,  maxfun);
document.write("Result="+x);
</script>


</body>
</html>
